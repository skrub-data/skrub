:html_theme.sidebar_secondary.remove:

{% if module == "skrub" -%}
{%- set module_hook = "skrub" -%}
{%- elif module.startswith("skrub.") -%}
{%- set module_hook = module[6:] -%}
{%- else -%}
{%- set module_hook = None -%}
{%- endif -%}

{% if module_hook %}
.. _{{ module_hook }}_ref:
{% endif %}

.. title:: {{ module }}

{% if not module.startswith("skrub.") -%}
{% set module = "skrub" %}
.. currentmodule:: {{ module }}
{%- else -%}
.. automodule:: {{ module }}
{%- endif -%}

{% if module_info["description"] %}
{{ module_info["description"] }}
{% endif %}

{% for section in module_info["sections"] %}
{% if section["title"] and module_hook %}
.. _{{ module_hook }}_ref-{{ section["title"]|lower|replace(" ", "-") }}:
{% endif %}

{% if section["title"] %}
{{ section["title"] }}
{{ "-" * section["title"]|length }}
{% endif %}

{% if section["description"] %}
{{ section["description"] }}
{% endif %}

{% if section["template"] %}
{% set template = section["template"] %}
{% else %}
{% set template = "base.rst" %}
{% endif %}

.. autosummary::
  :nosignatures:
  :toctree: generated/
  :template: {{ template }}

{% for obj in section["autosummary"] %}
  {{ obj }}
{%- endfor %}
{% endfor %}
