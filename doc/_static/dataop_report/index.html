<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>run report</title>
    <style>
     html {
    font-family: sans-serif;
    --current-node-color: #15ed8f;
}

* *::before, *::after {
    box-sizing: border-box;
}

pre, code {
    font-size: 1rem;
}

#graph-nav text {
    transform: translateY(2px);
}

.data_op-node-wrapper {
    overflow-x: auto;
}

.mini-nav > ul {
    display: grid;
    grid-template-columns: 10ch 10ch 10ch;
    list-style-type: none;
}

.data_op-node {
    display: flex;
    height: calc(100vh - 24px - 24px);
}

.data_op-node > * {
    padding: 1rem;
    max-height: 100%;
    overflow-y: auto;
}

.data_op-node > nav.main-nav {
    padding-top: 24px;
    border-right: 2px solid #ccc;
    flex-shrink: 0;
}

.node-details {
    flex-grow: 1;
    flex-shrink: 1;
}

.node-details[data-has-error]{
    background: #ffcccc;
}

.node-details[data-is-skipped]{
    background: #eee;
}

.node-creation-stack {
    font-size: 1rem;
}

.main-nav:not([data-is-open]){
    display: none;
}

.main-nav[data-is-open] + .node-details {
    min-width: min(95%, 25rem);
}

.nav-legend-current-node {
    display: flex;
    background: var(--current-node-color);
    border: 4px solid black;
    font-size: 1.2rem;
    padding: 3px;
}

.nav-legend-current-node + * {
    margin-top: 2rem;
}

.current-node polygon {

    fill: var(--current-node-color);
    stroke-width: 3;
}

.icon-button {
    position: absolute;
    left: 5px;
    top: 5px;
    padding: 2px;
    width: 24px;
    height: 24px;
}

.error-node polygon {
    stroke: red;
    stroke-width: 3;
}

.skipped-node polygon {
    stroke-dasharray: 4;
}
    </style>
</head>

<body>
    <p>
        Click on a node to display more information.
    </p>
    <div id="graph-nav" data-node-status='{"0": "success", "1": "success", "2": "success", "3": "success", "4": "success", "5": "success", "6": "success", "7": "success", "8": "success", "9": "success", "10": "success", "11": "success"}'>
        <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="403pt" height="476pt"
 viewBox="0.00 0.00 403.00 476.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 472)">

<polygon fill="white" stroke="transparent" points="-4,4 -4,-472 399,-472 399,4 -4,4"/>
<!-- node_0 -->
<g id="node_0" class="node">

<g id="a_node_0"><a xlink:href="node_0.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;5&#45;40259c915297&gt;&quot;, line 4, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;baskets = skrub.var(&quot;baskets&quot;, data.baskets).skb.subsample()">
<polygon fill="none" stroke="black" points="162.5,-334 72.5,-334 72.5,-309 162.5,-309 162.5,-334"/>
<polygon fill="none" stroke="black" points="166.5,-338 68.5,-338 68.5,-305 166.5,-305 166.5,-338"/>
<text text-anchor="start" x="79.5" y="-319.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">Var &#39;baskets&#39;</text>
</a>
</g>
</g>
<!-- node_1 -->
<g id="node_1" class="node">

<g id="a_node_1"><a xlink:href="node_1.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;5&#45;40259c915297&gt;&quot;, line 4, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;baskets = skrub.var(&quot;baskets&quot;, data.baskets).skb.subsample()">
<polygon fill="none" stroke="black" points="184.5,-269 50.5,-269 50.5,-244 184.5,-244 184.5,-269"/>
<text text-anchor="start" x="57.5" y="-254.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">SubsamplePreviews</text>
</a>
</g>
</g>
<!-- node_0&#45;&gt;node_1 -->
<g id="edge7" class="edge">

<path fill="none" stroke="black" d="M117.5,-304.93C117.5,-297.22 117.5,-287.8 117.5,-279.39"/>
<polygon fill="black" stroke="black" points="121,-279.14 117.5,-269.14 114,-279.14 121,-279.14"/>
</g>
<!-- node_2 -->
<g id="node_2" class="node">

<g id="a_node_2"><a xlink:href="node_2.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;5&#45;40259c915297&gt;&quot;, line 5, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;X = baskets[[&quot;ID&quot;]].skb.mark_as_X()">
<polygon fill="#c6d5f0" stroke="black" points="215.5,-208 103.5,-208 103.5,-183 215.5,-183 215.5,-208"/>
<text text-anchor="start" x="110.5" y="-193.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">X: GetItem [&#39;ID&#39;]</text>
</a>
</g>
</g>
<!-- node_1&#45;&gt;node_2 -->
<g id="edge6" class="edge">

<path fill="none" stroke="black" d="M125.8,-243.84C131.38,-236.01 138.87,-225.47 145.38,-216.34"/>
<polygon fill="black" stroke="black" points="148.27,-218.31 151.22,-208.13 142.57,-214.25 148.27,-218.31"/>
</g>
<!-- node_10 -->
<g id="node_10" class="node">

<g id="a_node_10"><a xlink:href="node_10.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;5&#45;40259c915297&gt;&quot;, line 6, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;y = baskets[&quot;fraud_flag&quot;].skb.mark_as_y()">
<polygon fill="#fad9c6" stroke="black" points="151,-147 0,-147 0,-122 151,-122 151,-147"/>
<text text-anchor="start" x="7" y="-132.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">y: GetItem &#39;fraud_flag&#39;</text>
</a>
</g>
</g>
<!-- node_1&#45;&gt;node_10 -->
<g id="edge12" class="edge">

<path fill="none" stroke="black" d="M110.98,-243.68C105.96,-234.23 99.13,-220.55 94.5,-208 88.32,-191.27 83.31,-171.67 79.99,-157.07"/>
<polygon fill="black" stroke="black" points="83.35,-156.03 77.79,-147.01 76.51,-157.53 83.35,-156.03"/>
</g>
<!-- node_8 -->
<g id="node_8" class="node">

<g id="a_node_8"><a xlink:href="node_8.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;7&#45;1f33b5cb524d&gt;&quot;, line 2, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;features = X.merge(aggregated_products, left_on=&quot;ID&quot;, right_on=&quot;basket_ID&quot;)">
<polygon fill="none" stroke="black" points="300,-147 169,-147 169,-122 300,-122 300,-147"/>
<text text-anchor="start" x="176" y="-132.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">CallMethod &#39;merge&#39;</text>
</a>
</g>
</g>
<!-- node_2&#45;&gt;node_8 -->
<g id="edge4" class="edge">

<path fill="none" stroke="black" d="M174.32,-182.84C185,-174.44 199.62,-162.94 211.77,-153.38"/>
<polygon fill="black" stroke="black" points="214.02,-156.07 219.71,-147.13 209.69,-150.56 214.02,-156.07"/>
</g>
<!-- node_3 -->
<g id="node_3" class="node">

<g id="a_node_3"><a xlink:href="node_3.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;5&#45;40259c915297&gt;&quot;, line 8, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;products = skrub.var(&quot;products&quot;, data.products) # add a new variable">
<polygon fill="none" stroke="black" points="363,-464 266,-464 266,-439 363,-439 363,-464"/>
<polygon fill="none" stroke="black" points="367,-468 262,-468 262,-435 367,-435 367,-468"/>
<text text-anchor="start" x="273" y="-449.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">Var &#39;products&#39;</text>
</a>
</g>
</g>
<!-- node_4 -->
<g id="node_4" class="node">

<g id="a_node_4"><a xlink:href="node_4.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;6&#45;6e71c2038bf0&gt;&quot;, line 5, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;vectorized_products = products.skb.apply(vectorizer, cols=s.all() &#45; &quot;basket_ID&quot;)">
<polygon fill="none" stroke="black" points="386,-399 243,-399 243,-374 386,-374 386,-399"/>
<text text-anchor="start" x="250" y="-384.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">Apply TableVectorizer</text>
</a>
</g>
</g>
<!-- node_3&#45;&gt;node_4 -->
<g id="edge11" class="edge">

<path fill="none" stroke="black" d="M314.5,-434.93C314.5,-427.22 314.5,-417.8 314.5,-409.39"/>
<polygon fill="black" stroke="black" points="318,-409.14 314.5,-399.14 311,-409.14 318,-409.14"/>
</g>
<!-- node_5 -->
<g id="node_5" class="node">

<g id="a_node_5"><a xlink:href="node_5.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;7&#45;1f33b5cb524d&gt;&quot;, line 1, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;aggregated_products = vectorized_products.groupby(&quot;basket_ID&quot;).agg(&quot;mean&quot;).reset_index()">
<polygon fill="none" stroke="black" points="386.5,-334 242.5,-334 242.5,-309 386.5,-309 386.5,-334"/>
<text text-anchor="start" x="249.5" y="-319.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">CallMethod &#39;groupby&#39;</text>
</a>
</g>
</g>
<!-- node_4&#45;&gt;node_5 -->
<g id="edge10" class="edge">

<path fill="none" stroke="black" d="M314.5,-373.94C314.5,-365.7 314.5,-354.36 314.5,-344.43"/>
<polygon fill="black" stroke="black" points="318,-344.41 314.5,-334.41 311,-344.41 318,-344.41"/>
</g>
<!-- node_6 -->
<g id="node_6" class="node">

<g id="a_node_6"><a xlink:href="node_6.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;7&#45;1f33b5cb524d&gt;&quot;, line 1, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;aggregated_products = vectorized_products.groupby(&quot;basket_ID&quot;).agg(&quot;mean&quot;).reset_index()">
<polygon fill="none" stroke="black" points="372,-269 257,-269 257,-244 372,-244 372,-269"/>
<text text-anchor="start" x="264" y="-254.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">CallMethod &#39;agg&#39;</text>
</a>
</g>
</g>
<!-- node_5&#45;&gt;node_6 -->
<g id="edge9" class="edge">

<path fill="none" stroke="black" d="M314.5,-308.94C314.5,-300.7 314.5,-289.36 314.5,-279.43"/>
<polygon fill="black" stroke="black" points="318,-279.41 314.5,-269.41 311,-279.41 318,-279.41"/>
</g>
<!-- node_7 -->
<g id="node_7" class="node">

<g id="a_node_7"><a xlink:href="node_7.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;7&#45;1f33b5cb524d&gt;&quot;, line 1, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;aggregated_products = vectorized_products.groupby(&quot;basket_ID&quot;).agg(&quot;mean&quot;).reset_index()">
<polygon fill="none" stroke="black" points="395,-208 234,-208 234,-183 395,-183 395,-208"/>
<text text-anchor="start" x="241" y="-193.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">CallMethod &#39;reset_index&#39;</text>
</a>
</g>
</g>
<!-- node_6&#45;&gt;node_7 -->
<g id="edge8" class="edge">

<path fill="none" stroke="black" d="M314.5,-243.84C314.5,-236.57 314.5,-226.98 314.5,-218.33"/>
<polygon fill="black" stroke="black" points="318,-218.13 314.5,-208.13 311,-218.13 318,-218.13"/>
</g>
<!-- node_7&#45;&gt;node_8 -->
<g id="edge5" class="edge">

<path fill="none" stroke="black" d="M298.69,-182.84C287.19,-174.36 271.41,-162.72 258.37,-153.1"/>
<polygon fill="black" stroke="black" points="260.4,-150.25 250.27,-147.13 256.24,-155.88 260.4,-150.25"/>
</g>
<!-- node_9 -->
<g id="node_9" class="node">

<g id="a_node_9"><a xlink:href="node_9.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;7&#45;1f33b5cb524d&gt;&quot;, line 3, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;features = features.drop(columns=[&quot;ID&quot;, &quot;basket_ID&quot;])">
<polygon fill="none" stroke="black" points="276.5,-86 156.5,-86 156.5,-61 276.5,-61 276.5,-86"/>
<text text-anchor="start" x="163.5" y="-71.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">CallMethod &#39;drop&#39;</text>
</a>
</g>
</g>
<!-- node_8&#45;&gt;node_9 -->
<g id="edge3" class="edge">

<path fill="none" stroke="black" d="M230.94,-121.84C228.68,-114.41 225.67,-104.55 222.99,-95.76"/>
<polygon fill="black" stroke="black" points="226.31,-94.68 220.05,-86.13 219.62,-96.72 226.31,-94.68"/>
</g>
<!-- node_11 -->
<g id="node_11" class="node">

<g id="a_node_11"><a xlink:href="node_11.html" xlink:title=" &#160;&#160;&#160;&#160;&#160;File &quot;&lt;ipython&#45;input&#45;9&#45;34e4c9884a14&gt;&quot;, line 1, in &lt;module&gt;&#10; &#160;&#160;&#160;&#160;&#160;&#160;&#160;predictions = features.skb.apply(ExtraTreesClassifier(n_jobs=&#45;1), y=y)">
<polygon fill="none" stroke="black" points="238.5,-25 70.5,-25 70.5,0 238.5,0 238.5,-25"/>
<text text-anchor="start" x="77.5" y="-10.4" font-family="sans-serif" font-weight="bold" font-size="12.00" fill="#1a0dab">Apply ExtraTreesClassifier</text>
</a>
</g>
</g>
<!-- node_9&#45;&gt;node_11 -->
<g id="edge1" class="edge">

<path fill="none" stroke="black" d="M204.25,-60.84C195.67,-52.68 184.03,-41.6 174.16,-32.21"/>
<polygon fill="black" stroke="black" points="176.38,-29.49 166.72,-25.13 171.56,-34.56 176.38,-29.49"/>
</g>
<!-- node_10&#45;&gt;node_11 -->
<g id="edge2" class="edge">

<path fill="none" stroke="black" d="M83.07,-121.99C96.49,-101.62 124.57,-58.96 141.25,-33.62"/>
<polygon fill="black" stroke="black" points="144.26,-35.42 146.83,-25.15 138.41,-31.58 144.26,-35.42"/>
</g>
</g>
</svg>

    </div>
</body>
<script>
 (function() {

    function highlightCurrentNode() {
        const graphDiv = document.getElementById('graph-nav');
        const currentNode = graphDiv.dataset.currentNodeId;
        const nodeElem = document.getElementById(currentNode);
        if (nodeElem === null){
            return;
        }
        nodeElem.classList.add('current-node');
    }
    highlightCurrentNode();

    function toggleNav() {
        const nav = document.querySelector("nav");
        if (nav === null){
            return;
        }
        if (nav.hasAttribute("data-is-open")) {
            nav.removeAttribute("data-is-open");
        } else {
            nav.setAttribute("data-is-open", "");
        }
    }
    const toggleNavButton = document.getElementById('toggle-nav');
    if (toggleNavButton !== null){
        toggleNavButton.addEventListener("click", toggleNav);
    }

    function showNodeStatus() {
        const graphDiv = document.getElementById('graph-nav');
        console.log(graphDiv.dataset.nodeStatus);
        const nodeStatus = JSON.parse(graphDiv.dataset.nodeStatus);
        console.log(nodeStatus);
        for (const nodeId in nodeStatus) {
            const nodeElem = document.getElementById(`node_${nodeId}`);
            console.log(nodeElem);
            switch (nodeStatus[nodeId]) {
            case 'success':
                nodeElem.classList.add('success-node');
                break;
            case 'error':
                nodeElem.classList.add('error-node');
                break;
                default:
                    nodeElem.classList.add('skipped-node');
                    break;
            }
        }
    }
    showNodeStatus();
})();
</script>

</html>
