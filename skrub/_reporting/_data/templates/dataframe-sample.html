{% macro kbd(text) %}
<span class="keyboard-key">{{ text }}</span>
{% endmacro %}
{% set has_index = summary['head']['index'] is not none %}

<article class="wrapper" data-show-on="NON_EMPTY_COLUMN_FILTER_SELECTED"
    data-hide-on="EMPTY_COLUMN_FILTER_SELECTED">
    {% include "table-bar.html" %}

    <div class="horizontal-scroll">
        <table class="pure-table pure-table-striped table-with-selectable-cells"
            data-manager="SampleTable" {% if has_index %} data-has-index {% endif %}
            data-n-head-rows="{{ summary['head']['data'].__len__() }}"
            data-n-tail-rows="{{ summary['tail']['data'].__len__() }}"
            data-n-cols="{{ summary.head.header.__len__() }}">
            <thead>
                <tr>
                    {% if has_index %}
                    {% set index_name = summary.head.index_name %}
                    <th class="dataframe-index table-cell clickable ellided-short"
                        scope="col" class="clickable ellided table-cell"
                        id="sample-table-cell-head-header-index"
                        data-manager="SampleTableCell" data-role="clickable-table-cell"
                        data-column-idx="-1" data-row-idx-in-table-part="-1"
                        data-table-part="head"
                        data-value-str="{{ index_name.__str__() }}"
                        data-value-repr="{{ index_name.__repr__() }}">
                        {% if not index_name | is_null %}
                        {{ index_name }}
                        {% endif %}
                    </th>
                    {% endif %}
                    {% for idx in range(summary.head.header.__len__()) %}
                    {% set column_name = summary.head.header[idx] %}

                    <th scope="col" class="clickable ellided table-cell"
                        id="sample-table-cell-head-header-{{ idx }}"
                        data-manager="SampleTableCell FilterableColumn"
                        data-column-name="{{ column_name }}" data-column-idx="{{ idx }}"
                        data-row-idx-in-table-part="-1" data-table-part="head"
                        data-value-str="{{ column_name.__str__() }}"
                        data-value-repr="{{ column_name.__repr__() }}">{{ column_name }}
                    </th>
                    {% endfor %}
                </tr>
            </thead>
            {% set table_part = "head" %}
            {% include "table-part.html" %}

            {% if summary.tail.data %}
            <tbody>
                <tr>
                    {% for column_name in summary.head.header %}
                    <td class="ellided-table-part" data-manager="FilterableColumn"
                        data-column-name="{{ column_name }}">⋮</td>
                    {% endfor %}
                </tr>
            </tbody>
            {% set table_part = "tail" %}
            {% include "table-part.html" %}
            {% endif %}

        </table>
    </div>

    <div class="table-footer">
        <div>
            <strong>{{ summary.n_rows | format_number }}</strong> rows ✕
            <strong data-manager="ColumnFilterMatchCount"
                data-test="n-columns-display">{{ summary.n_columns | format_number }}</strong>
            columns.
        </div>
        <div class="keyboard-hints">
            <div>
                {{ kbd("Ctrl-C") }}
                {{ kbd("←") }}
                {{ kbd("↑") }}
                {{ kbd("↓") }}
                {{ kbd("→") }}
                {{ kbd("Esc") }}
            </div>
        </div>
    </div>


    <div class="column-summary-group columns-in-sample-tab">
        {% set in_sample_tab=True %}
        {% for column in summary.columns %}
        {% set col_id="col_{}_in_sample_tab".format(loop.index0) %}
        {% include "column-summary.html" %}
        {% endfor %}
        {% set in_sample_tab=False %}
    </div>
</article>

{% include "no-filter-matches.html" %}
